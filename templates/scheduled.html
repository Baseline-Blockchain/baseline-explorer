{% extends "base.html" %}
{% block content %}

<h2>Scheduled Sends</h2>

<div class="pagination">
  {% if has_prev %}
  <a href="{{ url_for('scheduled', page=page-1) }}">&larr; Previous</a>
  {% else %}
  <span class="disabled">&larr; Previous</span>
  {% endif %}
  <span class="muted">Page {{ page }}</span>
  {% if has_next %}
  <a href="{{ url_for('scheduled', page=page+1) }}">Next &rarr;</a>
  {% else %}
  <span class="disabled">Next &rarr;</span>
  {% endif %}
</div>

{% if scheduled %}
<div class="table-scroll">
  <table>
    <thead>
      <tr>
        <th>Schedule ID</th>
        <th>Destination</th>
        <th>Amount</th>
        <th>Lock Time</th>
        <th>Status</th>
        <th>Cancelable</th>
      </tr>
    </thead>
    <tbody>
      {% for entry in scheduled %}
      <tr>
        <td class="hash">
          <span title="{{ entry.schedule_id }}">{{ entry.schedule_id[:12] }}…</span>
        </td>
        <td>{{ entry.dest_address or "-" }}</td>
        <td>{{ "{:.8f}".format(entry.amount) }}</td>
        <td>{{ format_lock_time(entry.lock_time) }}</td>
        <td>{{ entry.status }}</td>
        <td>{{ "✓" if entry.cancelable else "✕" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<p>No scheduled sends to show.</p>
{% endif %}

<div class="pagination">
  {% if has_prev %}
  <a href="{{ url_for('scheduled', page=page-1) }}">&larr; Previous</a>
  {% else %}
  <span class="disabled">&larr; Previous</span>
  {% endif %}
  <span class="muted">Showing {{ per_page }} per page</span>
  {% if has_next %}
  <a href="{{ url_for('scheduled', page=page+1) }}">Next &rarr;</a>
  {% else %}
  <span class="disabled">Next &rarr;</span>
  {% endif %}
</div>

{% endblock %}

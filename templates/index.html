{% extends "base.html" %}
{% block content %}

<div class="grid">
  <div class="card">
    <h2>Chain</h2>
    <p class="muted">Height</p>
    <p class="value">{{ chain.blocks }}</p>
    <p class="muted">Difficulty</p>
    {% set difficulty = chain.get("difficulty") %}
    <p>
      {% if difficulty is not none %}
        {{ "{:,.6f}".format(difficulty) }}
      {% else %}
        -
      {% endif %}
    </p>
    <p class="muted">Network Hashrate</p>
    <p>
      {% set hashrate = mining.get("networkhashps") if mining else None %}
      {{ format_hashrate(hashrate) }}
    </p>
  </div>
  <div class="card">
    <h2>Supply</h2>
    {% if supply_error %}
      <p class="muted">{{ supply_error }}</p>
    {% elif supply %}
      <p class="muted">Circulating</p>
      <p class="value">{{ format_amount(supply.circulating_liners) }}</p>
      <p class="muted">Total</p>
      <p>{{ format_amount(supply.total_liners) }}</p>
      <p class="muted">Max</p>
      <p>300,000,000</p>
    {% else %}
      <p class="muted">-</p>
    {% endif %}
  </div>
  <div class="card">
    <h2>Mempool</h2>
    <p class="muted">Transactions</p>
    <p>{{ mempool.size }}</p>
    <p class="muted">Bytes</p>
    <p>{{ "{:,}".format(mempool.bytes) }}</p>
  </div>
</div>

<h2 style="margin-top: 1.5rem;">Blocks</h2>

<div class="pagination">
  {% if has_prev %}
  <a href="{{ url_for('index', page=page-1) }}">&larr; Previous</a>
  {% else %}
  <span class="disabled">&larr; Previous</span>
  {% endif %}
  <span class="muted">Page {{ page }}</span>
  {% if has_next %}
  <a href="{{ url_for('index', page=page+1) }}">Next &rarr;</a>
  {% else %}
  <span class="disabled">Next &rarr;</span>
  {% endif %}
</div>

<div class="table-scroll">
  <table>
    <thead>
      <tr>
        <th>Height</th>
        <th>Hash</th>
        <th>Time</th>
        <th>Tx</th>
      </tr>
    </thead>
    <tbody>
      {% for block in blocks %}
      <tr>
        <td><a href="{{ url_for('block_by_height', height=block.height) }}">{{ block.height }}</a></td>
        <td class="hash"><a href="{{ url_for('block_detail', block_hash=block.hash) }}">{{ block.hash }}</a></td>
        <td>{{ block.age }}</td>
        <td>{{ block.nTx }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="pagination">
  {% if has_prev %}
  <a href="{{ url_for('index', page=page-1) }}">&larr; Previous</a>
  {% else %}
  <span class="disabled">&larr; Previous</span>
  {% endif %}
  <span class="muted">Showing {{ per_page }} per page</span>
  {% if has_next %}
  <a href="{{ url_for('index', page=page+1) }}">Next &rarr;</a>
  {% else %}
  <span class="disabled">Next &rarr;</span>
  {% endif %}
</div>

{% endblock %}
